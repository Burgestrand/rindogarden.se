---
import Headline from '../../components/headings/Headline.astro'
import * as events from '../../events'
import Time from '../../components/events/Time.astro'

export async function getStaticPaths() {
  const list = await events.list()
  return list.map((event, index) => {
    const prev = list[index - 1] ?? null
    const next = list[index + 1] ?? null

    return ({
      params: { slug: event.slug },
      props: { event, next, prev },
    })
  })
}

import Layout from '../../layouts/Layout.astro';

const { event, prev, next } = Astro.props
const { Content } = await event.render()

const title = (event.data.title) + " " + events.date.short(event)
---
<Layout title={title}>
  <header>
    <Headline class="leading-none pt-6" text={event.data.title} size={18} />
    <p class="text-center">
      <Time event={event} />
    </p>
  </header>
  <main>
    <section class="px-4 py-2 border border-shark-800 mb-2 rounded-sm bg-persian-rose-500/80 flex flex-col gap-y-2">
      <h2 class="text-4xl">Viktigt!</h2>

      <p>
        Innan du kommer till Rindögården behöver din vårdnadshavare fylla i och skicka in ett medgivandeformulär.
      </p>

      <a href="/for-vuxna" class="text-lightning-yellow-500">
        Mer info under <strong>För vuxna</strong>
      </a>
    </section>

    <Content />
  </main>
  <footer class="pb-8">
    <nav>
      <ul class="grid grid-cols-2 place-items-center">
        <li>
          {prev && (
            <a href={prev.url}>Föregående</a>
          )}
        </li>
        <li>
          {next && (
            <a href={next.url}>Nästa</a>
          )}
        </li>
      </ul>
    </nav>
  </footer>
</Layout>
